{
    "file": "/home/azmain/GitHub Codes/Type_Inference_with_LLM/Java_Type_Inference/snippets_for_test/all-one-shot/Class_20.java",
    "java_code": "/*\nDate: 1/19/17\nURL: http://stackoverflow.com/questions/10367698/java-multiple-file-transfer-over-socket\n*/\npackage common_JDK;\nimport java.util.ArrayList;\nimport java.io.FileInputStream;\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.FileOutputStream;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.BufferedOutputStream;\nimport java.io.BufferedInputStream;\n\nclass Class_20{\npublic static void receive(){\n\n\n    try {\n        DataInputStream dis = new DataInputStream(new BufferedInputStream(null));\n        DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(null, 0));\n//read the number of files from the client\n        int number = dis.readInt();\n        ArrayList<File>files = new ArrayList<File>(number);\n        System.out.println(\"Number of Files to be received: \" +number);\n        //read file names, add files to arraylist\n        for(int i = 0; i< number;i++){\n            File file = new File(dis.readUTF());\n            files.add(file);\n        }\n        int n = 0;\n        byte[]buf = new byte[4092];\n\n        //outer loop, executes one for each file\n        for(int i = 0; i < files.size();i++){\n\n            System.out.println(\"Receiving file: \" + files.get(i).getName());\n            //create a new fileoutputstream for each new file\n            FileOutputStream fos = new FileOutputStream(\"C:\\\\users\\\\tom5\\\\desktop\\\\salestools\\\\\" +files.get(i).getName());\n            //read file\n            while((n = dis.read(buf)) != -1){\n                fos.write(buf,0,n);\n                fos.flush();\n            }\n            fos.close();\n        }\n\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n\n    }\n}\npublic void send(ArrayList<File>files){\n\n    try {\n        DataInputStream dis = new DataInputStream(new BufferedInputStream(null));\n        DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(null));\n        System.out.println(files.size());\n//write the number of files to the server\n        dos.writeInt(files.size());\n        dos.flush();\n\n        //write file names \n        for(int i = 0 ; i < files.size();i++){\n            dos.writeUTF(files.get(i).getName());\n            dos.flush();\n        }\n\n        //buffer for file writing, to declare inside or outside loop?\n        int n = 0;\n        byte[]buf = new byte[4092];\n        //outer loop, executes one for each file\n        for(int i =0; i < files.size(); i++){\n\n            System.out.println(files.get(i).getName());\n            //create new fileinputstream for each file\n            FileInputStream fis = new FileInputStream(files.get(i));\n\n            //write file to dos\n            while((n =fis.read(buf)) != -1){\n                dos.write(buf,0,n);\n                dos.flush();\n\n            }\n            //should i close the dataoutputstream here and make a new one each time?\n        }\n        //or is this good?\n        dos.close();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n\n}\n}",
    "stdout": "",
    "stderr": "",
    "return_code": 0
}