{
    "file": "/home/azmain/snr_fixed/Android42.java",
    "java_code": "package androidExamples;\n\nimport android.drm.DrmManagerClient.OnErrorListener;\nimport java.io.File;\nimport android.media.MediaPlayer.OnCompletionListener;\nimport android.os.Bundle;\nimport java.net.URL;\nimport java.io.FileOutputStream;\nimport android.media.MediaPlayer.OnBufferingUpdateListener;\nimport java.net.URLConnection;\nimport android.view.SurfaceView;\nimport java.io.IOException;\nimport android.media.MediaPlayer;\nimport android.graphics.PixelFormat;\nimport android.content.Intent;\nimport android.widget.Button;\nimport android.view.View;\nimport android.media.MediaPlayer.OnPreparedListener;\nimport android.content.pm.ActivityInfo;\nimport android.app.Activity;\nimport android.view.SurfaceHolder;\nimport java.io.InputStream;\nimport android.util.Log;\n\n//ID = 1188346\npublic class Android42 extends Activity implements OnErrorListener,\n\n\t\tOnBufferingUpdateListener, OnCompletionListener, OnPreparedListener, SurfaceHolder.Callback {\n\n\tprivate static final String TAG = \"MediaPreview\";\n\n\tprivate MediaPlayer mp;\n\tprivate SurfaceView mPreview;\n\tprivate SurfaceHolder holder;\n\tprivate Button btnPlay;\n\tprivate Button btnPause;\n\tprivate Button btnReset;\n\tprivate Button btnStop;\n\n\tprivate String mPath;\n\n\t@Override\n\tprotected void onCreate(Bundle savedInstanceState) {\n\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.media_preview);\n\n\t\tmPreview = (SurfaceView) findViewById(R.id.myImage);\n\t\tbtnPlay = (Button) findViewById(100);\n\t\tbtnPause = (Button) findViewById(101);\n\t\tbtnReset = (Button) findViewById(102);\n\t\tbtnStop = (Button) findViewById(103);\n\n\t\tgetPathFromParentDialog();\n\n\t\tbtnPlay.setOnClickListener(new View.OnClickListener() {\n\n\t\t\t@Override\n\t\t\tpublic void onClick(View v) {\n\t\t\t\tplayVideo();\n\t\t\t}\n\t\t});\n\n\t\tbtnPause.setOnClickListener(new View.OnClickListener() {\n\n\t\t\t@Override\n\t\t\tpublic void onClick(View v) {\n\t\t\t\t// TODO Auto-generated method stub\n\t\t\t\tif (mp != null) {\n\t\t\t\t\tmp.pause();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tbtnReset.setOnClickListener(new View.OnClickListener() {\n\n\t\t\t@Override\n\t\t\tpublic void onClick(View v) {\n\t\t\t\tif (mp != null) {\n\t\t\t\t\tmp.seekTo(0);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tbtnStop.setOnClickListener(new View.OnClickListener() {\n\n\t\t\t@Override\n\t\t\tpublic void onClick(View v) {\n\t\t\t\tif (mp != null) {\n\t\t\t\t\tmp.stop();\n\t\t\t\t\tmp.release();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tgetWindow().setFormat(PixelFormat.TRANSPARENT);\n\t\tholder = mPreview.getHolder();\n\t\tholder.addCallback(this);\n\t\tholder.setFixedSize(400, 300);\n\t}\n\n\t@Override\n\tprotected void onResume() {\n\n\t\tsetRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n\t\tsuper.onResume();\n\t}\n\n\t@Override\n\tpublic boolean onError(MediaPlayer mp, int what, int extra) {\n\t\tif (mp != null) {\n\t\t\tmp.stop();\n\t\t\tmp.release();\n\t\t}\n\t\treturn false;\n\t}\n\n\t@Override\n\tpublic void onBufferingUpdate(MediaPlayer mp, int percent) {\n\t\t// TODO Auto-generated method stub\n\n\t}\n\n\t@Override\n\tpublic void onCompletion(MediaPlayer mp) {\n\t\t// TODO Auto-generated method stub\n\n\t}\n\n\t@Override\n\tpublic void onPrepared(MediaPlayer mp) {\n\t\t// TODO Auto-generated method stub\n\n\t}\n\n\t@Override\n\tpublic void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {\n\t\t// TODO Auto-generated method stub\n\n\t}\n\n\t@Override\n\tpublic void surfaceCreated(SurfaceHolder holder) {\n\t\t// TODO Auto-generated method stub\n\n\t}\n\n\t@Override\n\tpublic void surfaceDestroyed(SurfaceHolder holder) {\n\t\t// TODO Auto-generated method stub\n\n\t}\n\n\tprivate void playVideo() {\n\t\ttry {\n\t\t\tmp = new MediaPlayer();\n\t\t\tmp.setOnErrorListener(this);\n\t\t\tmp.setOnBufferingUpdateListener(this);\n\t\t\tmp.setOnCompletionListener(this);\n\t\t\tmp.setOnPreparedListener(this);\n\t\t\tmp.setAudioStreamType(2);\n\n\t\t\tmp.setDisplay(mPreview.getHolder());\n\t\t\tRunnable r = new Runnable() {\n\t\t\t\t@Override\n\t\t\t\tpublic void run() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetDataSource(mPath);\n\t\t\t\t\t} catch (Exception ex) {\n\t\t\t\t\t\tLog.e(TAG, ex.getMessage());\n\t\t\t\t\t}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tmp.prepare();\n\t\t\t\t\t\tLog.v(TAG, \"Duration: ===> \" + mp.getDuration());\n\t\t\t\t\t} catch (IllegalStateException e) {\n\t\t\t\t\t\t// TODO Auto-generated catch block\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\t// TODO Auto-generated catch block\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t\tLog.e(TAG, e.getMessage());\n\t\t\t\t\t}\n\t\t\t\t\tmp.start();\n\t\t\t\t}\n\n\t\t\t};\n\t\t\tnew Thread(r).start();\n\t\t} catch (Exception ex) {\n\t\t\tString sDummy = ex.toString();\n\t\t\tif (mp != null) {\n\t\t\t\tmp.stop();\n\t\t\t\tmp.release();\n\t\t\t}\n\t\t}\n\n\t}\n\n\tprivate void setDataSource(String path) throws IOException {\n\t\tif (!URLUtil.isNetworkUrl(mPath)) {\n\t\t\tmp.setDataSource(mPath);\n\t\t} else {\n\t\t\tURL url = new URL(mPath);\n\t\t\tURLConnection cn = url.openConnection();\n\t\t\tcn.connect();\n\t\t\tInputStream stream = cn.getInputStream();\n\t\t\tif (stream == null) {\n\t\t\t\tthrow new RuntimeException(\"stream is null\");\n\t\t\t}\n\t\t\tFile fileTemp = File.createTempFile(\"mediaplayerTmp\", \"dat\");\n\t\t\tString tempPath = fileTemp.getAbsolutePath();\n\t\t\tFileOutputStream out = new FileOutputStream(fileTemp);\n\t\t\tbyte buf[] = new byte[128];\n\t\t\tdo {\n\t\t\t\tint numRead = stream.read(buf);\n\t\t\t\tif (numRead <= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tout.write(buf, 0, numRead);\n\t\t\t} while (true);\n\t\t\tmp.setDataSource(tempPath);\n\t\t\ttry {\n\t\t\t\tstream.close();\n\t\t\t} catch (Exception ex) {\n\t\t\t\tString sDummy = ex.toString();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void getPathFromParentDialog() {\n\t\tIntent intent = getIntent();\n\t\tmPath = intent.getExtras().getString(\"Path\");\n\t}\n}",
    "stdout": "",
    "stderr": "/home/azmain/snr_fixed/Android42.java:26: error: Android42 is not abstract and does not override abstract method onError(DrmManagerClient,DrmErrorEvent) in OnErrorListener\npublic class Android42 extends Activity implements OnErrorListener,\n       ^\n/home/azmain/snr_fixed/Android42.java:46: error: package R does not exist\n\t\tsetContentView(R.layout.media_preview);\n\t\t                ^\n/home/azmain/snr_fixed/Android42.java:48: error: package R does not exist\n\t\tmPreview = (SurfaceView) findViewById(R.id.myImage);\n\t\t                                       ^\n/home/azmain/snr_fixed/Android42.java:109: error: method does not override or implement a method from a supertype\n\t@Override\n\t^\n/home/azmain/snr_fixed/Android42.java:157: error: incompatible types: Android42 cannot be converted to OnErrorListener\n\t\t\tmp.setOnErrorListener(this);\n\t\t\t                      ^\n/home/azmain/snr_fixed/Android42.java:199: error: cannot find symbol\n\t\tif (!URLUtil.isNetworkUrl(mPath)) {\n\t\t     ^\n  symbol:   variable URLUtil\n  location: class Android42\nNote: Some messages have been simplified; recompile with -Xdiags:verbose to get full output\n6 errors\n",
    "return_code": 1
}